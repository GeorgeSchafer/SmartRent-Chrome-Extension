<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: devices.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: devices.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { SmartRentAPI as srapi } from './SmartRentApi.js';
import { DeliveryCode } from './codeClass.js';
import { Lock, Binary_Switch}  from './deviceClass.js'

/**
 * @summary Functions object literal stores functions for the sake of 
 * organization.
 * @author George Schafer
 */
const fns = {
  
    /**
     * @function load() is run as soon as the page loads. It seeks out 
     * the devices in the Resident's unit and creates elements to
     * display and allow manipulation. 
     */
    load(){
        const srdevices = srapi.getDevices();

        srdevices.forEach( (device) => {
          if(device.type == 'entry_control'){
            const lock = new Lock(device);
            const name = lock.name;

            devices[`${name}`] = lock;
            els[`${name}`] = lock.device_wrapper;
            els.devices.appendChild(els[`${name}`]);
            listeners.push(devices[`${name}`].icon.addEventListener('click', () => {devices[`${name}`].toggle()} ));
          } else if ( device.type == 'binary_switch' ){
            const binary_switch = new Binary_Switch(device);
            const name = binary_switch.name;

            devices[`${name}`] = binary_switch;
            els[`${binary_switch.name}`] = binary_switch.device_wrapper;
            els.devices.appendChild(els[`${binary_switch.name}`]);
            listeners.push(devices[`${name}`].icon.addEventListener('click', () => {devices[`${name}`].toggle()} ));
          }
        } );

        els.delivery = code.delivery.code_wrapper;
        els.devices.appendChild(els.delivery);
    },

    createListeners(element){
      listeners.push(element.icon.addEventListener('click'));
    }
  
};

/**
 * @description
 * Els is a collection of html elements that can be refered to for 
 * other element functions such as document.createElement().
 */
const els = {
  devices: document.querySelector('.devices'),
  refresh: document.querySelector('header')
};

/**
 * @description
 * devices holds the devices in order to call methods inside devices.
 */
const devices = {};

/**
 * @description
 * code holds the individual codes which are requested from the SR API.
 */
const code = {
    delivery: new DeliveryCode()
}

/**
 * @description
 * listeners stores event listeners so that created listeners can be
 * stored and activated.
 */
const listeners = [];


if(srapi.logged_in){
  fns.load();
}




/**
 * @description
 * Event Listeners are generated last after other elements they 
 * refer to are created. They are stored in the listeners variable above.
 */
listeners.push(els.refresh.querySelector('.icon').addEventListener('click', () => location.reload() ));
listeners.push(code.delivery.code_display.addEventListener('click', () => code.delivery.getCode() ));
listeners.push(code.delivery.icon.addEventListener( 'click', () => code.delivery.copy() ));


</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#code">code</a></li><li><a href="global.html#devices">devices</a></li><li><a href="global.html#els">els</a></li><li><a href="global.html#fns">fns</a></li><li><a href="global.html#listeners">listeners</a></li><li><a href="global.html#load()isrunassoonasthepageloads.ItseeksoutthedevicesintheResident'sunitandcreateselementstodisplayandallowmanipulation.">load() is run as soon as the page loads. It seeks out 
the devices in the Resident's unit and creates elements to
display and allow manipulation.</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Sun Mar 19 2023 02:25:38 GMT-0700 (Mountain Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
